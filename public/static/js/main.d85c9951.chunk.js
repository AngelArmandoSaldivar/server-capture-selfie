(this["webpackJsonpcapture-selfie"]=this["webpackJsonpcapture-selfie"]||[]).push([[0],{77:function(e,t,o){},79:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o(56),r=o.n(a),i=o(57),c=o.n(i),s=o(58),d=o.n(s),l=(o(52),o(124)),h=o(60),b=o.n(h),x=o(61),j=o.n(x),p=o(50),u=o.n(p),g=o(62),O=o.n(g),m=o.p+"static/media/contorno1.71e4b493.png",f=o(1);var w=()=>{const[e,t]=Object(n.useState)(),o=Object(n.useRef)(null),a=Object(n.useRef)(null),[r,i]=Object(n.useState)(!0),[s,h]=Object(n.useState)(!1),[x,p]=Object(n.useState)(!1),[g,w]=Object(n.useState)(!1),[S,v]=Object(n.useState)([]),[y,C]=Object(n.useState)({unit:"%",x:27,y:10,width:50,height:80,aspect:3/4}),[R,F]=Object(n.useState)({unit:"%",x:20,y:30,width:75,height:40,aspect:1.5}),[T,I]=Object(n.useState)("null"),[E,k]=Object(n.useState)(!0),[_,W]=Object(n.useState)(null),[D,H]=Object(n.useState)(""),[L,P]=Object(n.useState)(""),[B,z]=Object(n.useState)(""),[A,U]=Object(n.useState)(""),[N,G]=Object(n.useState)(null),[K,V]=Object(n.useState)(""),J=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLIENT_ID,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLIENT_SECRET,Object(n.useCallback)((e=>{if(a.current.getScreenshot()){F({unit:"%",x:20,y:30,width:60,height:40,aspect:1.5});const e=new FileReader;W(a.current.getScreenshot()),t(a.current.getScreenshot());const o=["",new Uint8Array([10]),new Uint32Array([2])],n=new File([o],"file.png",{lastModified:new Date(2022,0,5),type:""});e.readAsDataURL(n),i(!r),h(!s),k(!1)}}),[a])),M=Object(n.useCallback)((e=>{o.current=e}),[]);const q=(e,t)=>new Promise(((o,n)=>{const a=new Image;a.src=e,a.onload=()=>{const e=document.createElement("canvas"),n=a.naturalWidth/a.width,r=a.naturalHeight/a.height;e.width=t.width,e.height=t.height;e.getContext("2d").drawImage(a,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height),e.toBlob((e=>{const t=new FileReader;t.readAsDataURL(e),t.onloadend=()=>{v(S.concat(t.result)),o(t.result)}}),"image/jpeg"),h(!s),p(!x)},a.onerror=e=>{n(e)}}));var Q=async e=>{var t=e[0].replace(new RegExp("data:image/jpeg;base64,","gi"),""),o=e[1].replace(new RegExp("data:image/jpeg;base64,","gi"),""),n=e[2].replace(new RegExp("data:image/jpeg;base64,","gi"),"");const a=new Headers;a.append("Content-Type","application/json");const r=JSON.stringify({ineFront:t,ineBack:o,selfie:n}),i={method:"POST",headers:a,body:r,redirect:"follow"};console.log("FOTOS: "+r),V("Verificaci\xf3n facial en curso \n Espera un momento..."),fetch("https://server-capture-selfie-d4c65bd43858.herokuapp.com/app/verificacion",i).then((e=>e.text())).then((e=>{console.log("RESULT: "+e),V("Data: "+e)})).catch((e=>console.error(e)))};const X={contenedor:{width:"100%",border:"1px solid black",textAlign:"center",backgroundColor:"#c0c0c0",fontFamily:["Open Sans","Helvetica","sans-serif"].join(","),padding:"20px",boxSizing:"border-box",color:"#333"},botonFoto:{color:"white",border:"1px solid #007BFF",backgroundColor:"#007BFF",margin:"10px",width:"200px",height:"50px",justifyContent:"center",alignItems:"center",borderRadius:"5px",transition:"background-color 0.3s ease"},botonFotoHover:{backgroundColor:"#0056b3",border:"1px solid white",margin:"10px 0"},titulo:{fontSize:"1.5em",fontWeight:"bold",margin:"10px 0",backgroundColor:"#007BFF",color:"white",padding:"10px",borderRadius:"5px","@media (maxWidth: 768px)":{fontSize:"1.5em"}},subtitulo:{fontSize:"1.5em",margin:"10px 0",backgroundColor:"#007BFF",color:"white",padding:"10px",borderRadius:"5px","@media (maxWidth: 768px)":{fontSize:"1.2em"},margin:"10px 0",backgroundColor:"#007BFF",color:"white",padding:"10px",borderRadius:"5px"},textoGeneral:{fontSize:"1em",lineHeight:"1.5",margin:"10px 0",backgroundColor:"rgba(255, 255, 255, 0.\ud83d\ude0e",color:"#333",padding:"10px",borderRadius:"5px","@media (maxWidth: 768px)":{fontSize:"1em"}},recuadroPunteadoInterno:{border:"2px dashed white",position:"absolute",width:"75%",height:"40%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",maxWidth:"80%",maxHeight:"60%"},imagenOvalada:{position:"absolute",width:"90%",height:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",maxWidth:"100%",maxHeight:"100%"},"@media (min-width: 769px) and (maxWidth: 1024px)":{width:"85vw",height:"95vh"},"@media (min-width: 1025px)":{width:"90vw",height:"100vh"},webcamContenedor:{position:"relative",width:"100%",height:"auto",marginBottom:"20px",borderRadius:"10px",overflow:"hidden"},webcam:{width:"100%",height:"auto",borderRadius:"10px"},imagenRecortada:{width:"100%",height:"auto",maxWidth:"100%",maxHeight:"500px",borderRadius:"10px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},cropContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"auto",margin:"0 auto",borderRadius:"10px",overflow:"hidden",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},buttonContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:".5px"}};return Object(f.jsxs)("div",{className:"App",style:X.contenedor,children:[r&&Object(f.jsxs)("div",{style:{...X.textoGeneral,...X.colorTexto},children:[0===S.length&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{style:X.titulo,children:"Identificacion parte Trasera"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{children:"Coloca tu documento de identidad dentro del recuadro para realizar la captura."})]}),1===S.length&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{style:X.titulo,children:"Identificacion parte Delantera"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{children:"Coloca tu documento de identidad dentro del recuadro para realizar la captura."})]}),2===S.length&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{children:"T\xf3mate una Selfie"}),Object(f.jsx)("br",{}),Object(f.jsx)("p",{children:"Coloca tu rostro dentro del \xf3valo para realizar la captura."})]}),Object(f.jsxs)("div",{style:X.webcamContenedor,children:[Object(f.jsx)(d.a,{videoConstraints:2===S.length?{facingMode:"user"}:{facingMode:"environment"},audio:!1,ref:a,screenshotFormat:"image/jpeg",style:X.webcam}),E&&Object(f.jsx)("div",{style:2===S.length?X.ovaloPunteadoInterno:X.recuadroPunteadoInterno}),2===S.length?Object(f.jsx)("img",{src:m,alt:"Oval overlay",style:X.imagenOvalada}):Object(f.jsx)("div",{style:X.recuadroPunteadoInterno})]}),Object(f.jsx)("span",{style:{marginLeft:"0px"}}),Object(f.jsxs)("center",{children:[" ",Object(f.jsx)(l.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(f.jsx)(b.a,{}),style:X.botonFoto,onClick:J,children:"Tomar foto"})]})]}),s&&Object(f.jsxs)("div",{style:{...X.textoGeneral,...X.colorTexto},children:[Object(f.jsx)("h1",{style:{...X.titulo,...X.colorTexto},children:"Recortar foto"}),Object(f.jsx)("span",{style:{...X.textoGeneral,...X.colorTexto},children:"Recorta la foto del documento para obtener un mejor resultado."}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{style:X.cropContainer,children:Object(f.jsx)(c.a,{src:e,crop:2===S.length?y:R,onImageLoaded:M,onChange:e=>2===S.length?C(e):F(e),onComplete:e=>{z(e.x),U(e.y),H(e.width),P(e.height)},style:{maxWidth:"100%",maxHeight:"100%"}})}),Object(f.jsx)("center",{children:Object(f.jsx)(l.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(f.jsx)(j.a,{}),style:X.botonFoto,onClick:()=>(async e=>{if(_&&D&&L){e.width=D,e.height=L,e.x=B,e.y=A;const t=await q(_,e);I(t)}})(2===S.length?y:R),children:"Recortar Foto"})}),Object(f.jsx)("span",{style:{marginLeft:"0px"}}),Object(f.jsx)("center",{children:Object(f.jsx)(l.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(f.jsx)(u.a,{}),style:X.botonFoto,onClick:()=>{if(i(!r),h(!s),k(!0),1==x)return S.length>0?S=[]:""},children:"Repetir foto"})})]}),x&&Object(f.jsxs)("div",{style:{...X.textoGeneral,...X.colorTexto},children:[Object(f.jsxs)("div",{style:{...X.textoGeneral,...X.colorTexto},children:[Object(f.jsx)("h2",{style:X.titulo,children:"Foto capturada"}),Object(f.jsx)("span",{style:X.textoGeneral,children:"Verifique la foto recortada"}),Object(f.jsx)("img",{alt:"Crop",style:X.imagenRecortada,src:T})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("center",{children:Object(f.jsxs)(l.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(f.jsx)(u.a,{}),style:X.botonFoto,onClick:()=>{p(!x),i(!r),k(!0),S.pop()},children:["Repetir foto",Object(f.jsx)("span",{style:{marginLeft:"0px"}})]})}),Object(f.jsx)("span",{style:{marginLeft:"0px"}}),Object(f.jsx)("center",{children:Object(f.jsx)(l.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(f.jsx)(O.a,{}),style:X.botonFoto,onClick:()=>{p(!x),i(!r),k(!0),F({x:70,y:50,width:220,height:250}),3==S.length&&(i(!1),h(!1),p(!1),w(!g),Q(S))},children:"Continuar"})})]})]}),g&&Object(f.jsx)("div",{style:{...X.contenedor,...X.colorTexto},children:Object(f.jsx)("h1",{style:X.titulo,children:K})})]})};o(77);const S=document.getElementById("root");r.a.render(Object(f.jsx)(w,{}),S)}},[[79,1,2]]]);
//# sourceMappingURL=main.d85c9951.chunk.js.map