(this["webpackJsonpcapture-selfie"]=this["webpackJsonpcapture-selfie"]||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(3),c=n.n(s),l=(n(8),n(0));var r=()=>{const[e,t]=Object(a.useState)([]),[n,s]=Object(a.useState)(null),[c,r]=Object(a.useState)(null),[i,o]=Object(a.useState)(""),m=()=>{document.getElementById("fileInput").click()};return Object(l.jsxs)("div",{className:"contenedor-imagen",children:[Object(l.jsx)("button",{className:"custom-file-upload",onClick:3==e.length?function(){if(3===e.length){const t=new Headers;t.append("Content-Type","application/json");const n=JSON.stringify({ineFront:e[0],ineBack:e[1],selfie:e[2]}),a={method:"POST",headers:t,body:n,redirect:"follow"};console.log("FOTOS: "+n),o("Verificaci\xf3n facial en curso \n Espera un momento..."),fetch("https://server-capture-selfie-d4c65bd43858.herokuapp.com/app/verificacion",a).then((e=>e.text())).then((e=>{console.log("RESULTADO: "+e),o(e)})).catch((e=>console.error(e)))}}:m,children:null!==c?"Reemplazar Imagen":0===e.length?"CARGAR INE FRENTE":1===e.length?"CARGAR INE REVERSO":2===e.length?"CARGAR SELFIE":"VALIDAR DOCUMENTOS"}),Object(l.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",multiple:!0,onChange:n=>{const a=Array.from(n.target.files),l=a.filter((e=>e.type.startsWith("image/")&&e.size<=5242880));if(l.length!==a.length)return void s("Algunos archivos no son im\xe1genes o superan el tama\xf1o m\xe1ximo permitido de 5MB.");if(null===c){if(e.length+l.length>3)return void s("No se pueden cargar m\xe1s de 3 im\xe1genes.")}const i=l.map((e=>new Promise(((t,n)=>{const a=new FileReader;a.onloadend=()=>{const e=a.result.replace(/^data:image\/[a-z]+;base64,/,"");t(e)},a.onerror=n,a.readAsDataURL(e)}))));Promise.all(i).then((e=>{s(null),null!==c?(t((t=>{const n=[...t];return n[c]=e[0],n})),r(null)):t((t=>[...t,...e].slice(0,3)))})).catch((()=>{s("Error al cargar las im\xe1genes.")}))},style:{display:"none"}}),n&&Object(l.jsx)("p",{className:"error",children:n}),Object(l.jsxs)("div",{className:"imagenes-container",children:[e.map(((e,t)=>Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"image-wrapper",onClick:()=>(e=>{r(e),m()})(t),children:[Object(l.jsx)("img",{src:"data:image/jpeg;base64,".concat(e),alt:"Cargado por el usuario ".concat(t+1),className:"imagen"}),Object(l.jsx)("span",{className:"image-overlay",children:"Reemplazar"})]},t)," ",Object(l.jsx)("br",{})]}))),Object(l.jsx)("div",{className:"textoDiv",children:i})]})]})};n(10);const i=document.getElementById("root");c.a.render(Object(l.jsx)(r,{}),i)},8:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.403326e1.chunk.js.map