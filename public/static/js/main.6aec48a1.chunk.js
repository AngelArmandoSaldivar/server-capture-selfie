(this["webpackJsonpcapture-selfie"]=this["webpackJsonpcapture-selfie"]||[]).push([[0],{77:function(e,t,o){},79:function(e,t,o){"use strict";o.r(t);var a=o(0),n=o(55),c=o.n(n),r=o(56),s=o.n(r),i=o(57),l=o.n(i),d=(o(71),o(125)),b=o(124),j=o(59),h=o.n(j),O=o(60),p=o.n(O),u=o(50),x=o.n(u),g=o(61),f=o.n(g),m=o(1);var v=()=>{const[e,t]=Object(a.useState)(),o=Object(a.useRef)(null),[n,c]=Object(a.useState)({x:70,y:50,width:220,height:250}),r=Object(a.useRef)(null),[i,j]=Object(a.useState)(!0),[O,u]=Object(a.useState)(!1),[g,v]=Object(a.useState)(!1),[S,y]=Object(a.useState)(!1),[T,w]=Object(a.useState)([]),[C,E]=Object(a.useState)(""),[I,A]=Object(a.useState)(null),[R,_]=Object(a.useState)(""),[F,D]=Object(a.useState)(""),[k,H]=Object(a.useState)(""),[N,L]=Object(a.useState)(""),[P,z]=Object(a.useState)(null),[K,W]=Object(a.useState)(""),U=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLIENT_ID,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLIENT_SECRET,Object(a.useCallback)((e=>{if(r.current.getScreenshot()){const e=new FileReader;A(r.current.getScreenshot()),t(r.current.getScreenshot());const o=["",new Uint8Array([10]),new Uint32Array([2])],a=new File([o],"file.png",{lastModified:new Date(2022,0,5),type:""});e.readAsDataURL(a),j(!i),u(!O)}}),[r])),V=Object(a.useCallback)((e=>{o.current=e}),[]);const B=(e,t)=>new Promise(((o,a)=>{const n=new Image;n.src=e,n.onload=()=>{const e=document.createElement("canvas"),a=n.naturalWidth/n.width,c=n.naturalHeight/n.height;e.width=t.width,e.height=t.height;e.getContext("2d").drawImage(n,t.x*a,t.y*c,t.width*a,t.height*c,0,0,t.width,t.height),e.toBlob((e=>{const t=new FileReader;t.readAsDataURL(e),t.onloadend=()=>{w(T.concat(t.result)),o(t.result)}}),"image/jpeg"),u(!O),v(!g)},n.onerror=e=>{a(e)}}));var J=e=>{q();var t=q();console.log("TOKEN 1: "+t);var o=e[0].replace(new RegExp("data:image/jpeg;base64,","gi"),""),a=e[1].replace(new RegExp("data:image/jpeg;base64,","gi"),""),n=e[2].replace(new RegExp("data:image/jpeg;base64,","gi"),"");const c=new Headers;c.append("Content-Type","application/json"),c.append("Authorization","Bearer "+t);const r=JSON.stringify({id:Object(d.a)(),frontImage:o,backImage:a,faceImage:n});fetch("https://veridocid.azure-api.net/api/id/v3/verify",{method:"POST",headers:c,body:r,redirect:"follow"}).then((e=>e.text())).then((e=>{console.log("TOKEN 2: "+t),console.log("=====ENTRASTE A VERIFICACION DOCUMENTO======"),console.log("RESULT: "+e),W("Espere mientras se verifica tu informaci\xf3n..."),setTimeout((()=>{const o=new Headers;o.append("Content-Type","application/json"),o.append("Authorization","Bearer "+t);const a={method:"POST",headers:o,body:JSON.stringify({uuid:e,includeImages:!1}),redirect:"follow"};fetch("https://veridocid.azure-api.net/api/id/v3/results",a).then((e=>e.text())).then((e=>{e.identifier?(W("Datos enviados con exito!"),G(e)):setTimeout((()=>{fetch("https://veridocid.azure-api.net/api/id/v3/results",a).then((e=>e.text())).then((e=>{e.identifier?(W("Datos enviados con exito!"),G(e)):setTimeout((()=>{fetch("https://veridocid.azure-api.net/api/id/v3/results",a).then((e=>e.text())).then((e=>{W("Datos enviados con exito!"),G(e)}))}),2e4)}))}),2e4)})).catch((e=>console.error(e)))}),2e4)})).catch((e=>console.error(e)))};async function q(){const e=await fetch("https://server-capture-selfie-b01dd8c9a312.herokuapp.com/getToken");console.log("TOKEN INICIAL: "+e)}function G(e){const t=new Headers;t.append("Content-type","application/json"),t.append("Authorization",'OAuth realm="9323217",oauth_consumer_key="6909223765d68229f521ae5355031e937bc39ff684ce9a38ca644f8c9929bf1a",oauth_token="5e39a16ee321f9fab4d635bc694decb02b470de42e13c362d5f0f9b8a6b8b471",oauth_signature_method="HMAC-SHA256",oauth_timestamp="1713912081",oauth_nonce="6Tu5El2vtpR",oauth_version="1.0",oauth_signature="WRW4XjcugcHH2ZvVCG4fvedjR38cGU48o52pw0aTC2E%3D"'),t.append("Cookie","_abck=6D4A99472AEB74D57807B05C3A17AEDB~-1~YAAQT8X3vQ9lDPOOAQAASPMV+AsVpjjapbj7mcumlFM2pZPpqIkbiUbGehCqxvzPkEJWsq8yYJw9JplexuTsWQ//ihXsGyr+rDVytKoTJaqIKgVjMIHBZRG505cwIIYYG1+vE9MXYv145n/K/Jv3b71L1xG3fUJTHe6+hJuFWbKcorIQMg47R1Kd0N3SVHuzN83qR33eyVWma8XS5D5MoYGO7oKVlkE2cRoAmDkyAbgX6nBywfgLbOaEC6g8/AFU8RLiA/dPrqqpxfIzUwKji9WeSBqEAnPH6kI9hg7NpBl+DFbtdiLqLq0KmfJnwxIiPC/8iYcWBXWP/VPtzQTCfFaDn8v4Vqy+/kbjvt/l+dZtb1HT9NlI2lVAUL24jWLQSZgeP5HciwFh~-1~-1~-1");const o=JSON.stringify({nombre:"123"});fetch("https://9323217.restlets.api.netsuite.com/app/site/hosting/restlet.nl?script=383&deploy=1&123",{method:"POST",headers:t,body:o,redirect:"follow",mode:"cors"}).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.error(e)))}const M={contenedor:{width:"100%",border:"1px solid black",textAlign:"center",backgroundColor:"#3f3c38",fontFamily:["Open Sans","Helvetica","sans-serif"].join(",")},botonFoto:{color:"white",border:"1px solid white"},titulo:{fontSize:"12pt"},subtitulo:{fontSize:"11pt"},textoGeneral:{fontSize:"10pt"},colorTexto:{color:"white"}};return Object(m.jsxs)("div",{className:"App",style:M.contenedor,children:[i&&Object(m.jsxs)("div",{style:M.colorTexto,children:[0==T.length&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{style:M.titulo,children:"Camara Trasera"}),Object(m.jsx)("br",{}),"Coloca tu documento de identidad dentro del ",Object(m.jsx)("br",{}),"reacuadro para realizar la captura ",Object(m.jsx)("br",{})]}),1==T.length&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Camara Delantera"}),Object(m.jsx)("br",{}),"Coloca tu documento de identidad dentro del ",Object(m.jsx)("br",{}),"reacuadro para realizar la captura ",Object(m.jsx)("br",{})]}),2==T.length&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"T\xf3mate una Selfie"}),Object(m.jsx)("br",{}),"Coloca tu rostro dentro del ",Object(m.jsx)("br",{}),"reacuadro para realizar la captura ",Object(m.jsx)("br",{})]}),Object(m.jsx)(l.a,{videoConstraints:2==T.length?{facingMode:"user"}:{facingMode:"environment"},audio:!1,ref:r,screenshotFormat:"image/jpeg",style:{width:"100%",height:"500px"}}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(b.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(m.jsx)(h.a,{}),style:M.botonFoto,onClick:U,children:"Tomar foto"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]}),O&&Object(m.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[Object(m.jsx)("h1",{style:M.titulo,children:"Recortar foto"}),Object(m.jsx)("span",{style:M.textoGeneral,children:"Recorta la foto del documento para obtener un mejor resultado."}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{style:{width:"100%",height:"500px"},children:Object(m.jsx)(s.a,{src:e,onImageLoaded:V,crop:n,onChange:e=>c(e),onComplete:e=>{(e=>{H(e.x),L(e.y),_(e.width),D(e.height)})(e)}})}),Object(m.jsx)(b.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(m.jsx)(p.a,{}),style:M.botonFoto,onClick:async e=>{if(I&&R&&F){e.width=R,e.height=F,e.x=k,e.y=N;const t=await B(I,e);E(t)}},children:"Recortar Foto"}),Object(m.jsx)("span",{style:{marginLeft:"20px"}}),Object(m.jsx)(b.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(m.jsx)(x.a,{}),style:M.botonFoto,onClick:()=>{if(j(!i),u(!O),1==g)return T.length>0?T=[]:""},children:"Repetir foto"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]}),g&&Object(m.jsxs)("div",{style:M.colorTexto,children:[Object(m.jsxs)("div",{style:{width:"100%",height:"15%"},children:[Object(m.jsx)("h2",{style:M.titulo,children:"Foto capturada"}),Object(m.jsxs)("span",{style:M.textoGeneral,children:["Verifique la foto recortada",Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]}),Object(m.jsx)("img",{alt:"Crop",style:{height:"500px"},src:C})]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)(b.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(m.jsx)(x.a,{}),style:M.botonFoto,onClick:()=>{v(!g),j(!i),T.pop()},children:"Repetir foto"}),Object(m.jsx)("span",{style:{marginLeft:"20px"}}),Object(m.jsx)(b.a,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:Object(m.jsx)(f.a,{}),style:M.botonFoto,onClick:()=>{v(!g),j(!i),c({x:70,y:50,width:220,height:250}),3==T.length&&(j(!1),u(!1),v(!1),y(!S),J(T))},children:"Continuar"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]})]}),S&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{style:M.colorTexto,children:Object(m.jsxs)("h1",{style:M.titulo,children:[" ",K," "]})})})]})};o(77);const S=document.getElementById("root");c.a.render(Object(m.jsx)(v,{}),S)}},[[79,1,2]]]);
//# sourceMappingURL=main.6aec48a1.chunk.js.map