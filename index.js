const express = require('express');
const { json, urlencoded } = require("body-parser");
const path = require('path');
const app = express()
/*app.use(express.json());
app.use(express.urlencoded({extended: true}));*/
app.use(json({ limit: '10mb' }))
app.use(urlencoded({ limit: '10mb', extended: true }))
const port = process.env.PORT || 5000;
app.use(express.static(path.join(__dirname + "/public")));
require('dotenv').config();
const nsrestlet = require('nsrestlet');

var accountSettings = {
    accountId: process.env.ACCOUNT_ID,
    tokenKey: process.env.TOKEN_KEY,
    tokenSecret: process.env.TOKEN_SECRET,
    consumerKey: process.env.CONSUMER_KEY,
    consumerSecret: process.env.CONSUMER_SECRET };
var urlSettings = {
    url: process.env.URL
}

var myInvoices = nsrestlet.createLink(accountSettings, urlSettings);

app.post('/app/verificacion', (request, response) => {

    // myInvoices.post(request.body).then(function(body) {
    //     response.send("Response ok");
    // })
    // .catch(function(error) {
    //     console.log("ERROR: " + error);
    // });

    myInvoices.post(

        {
            "ineFront": "/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCABZALIDASIAAhEBAxEB/8QAHAABAAMAAgMAAAAAAAAAAAAAAAUGCAIEAwcJ/8QALhAAAQMEAQQBAgQHAAAAAAAAAAECAwQFBhEHCBIhMRMUQRUyQnEWFyIzUWaz/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAIBBQP/xAAaEQEBAQEBAQEAAAAAAAAAAAAAARECEiEx/9oADAMBAAIRAxEAPwD5hAA6DmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaUAAAAAAAAAAAAAAAAAAAAAAAAAAAARNqS2JYzcMzyi04laZIGVl5rYaCndO5WxtkkejWq5URVRNr50i/sRJf+n/S84YCn+xW//uwy3Gz9X2u6UrTba2e3V/VDwzBU0sj4Zo3XK5bY9qqjmqv0WvCop4LZ0pXG63Sqfb+VsKuWLWem+qvmU0EtU63WxP0xOfNDEsk7v0xRo5V350dmxcFpnmb5pyFnt6/hXjexXys/FL5IxFfO/wCZypS0bF/vVD/SInhvt2kQ9kcL8nY7zPz9hvFNBhtttnFFmbWpbsYrKjsp53JTSKtTXT6/qneqdzpV/J7brSEXp6ZKyJWW+SBZZ6dJZ6BtQ+CKr+FzI5VTynv0qt0vb7RFOobJ6sv5lQcE2qy5/wAdWrCqK0ZpVQ4/bLRRxx0CULqOJyPgnZv6lHL5WVXOVVXyqejG320VxdT1zlAAVUAAAAAAAAAAAAAAAAAAAAAAT+A1OI0WYWusz2G6TWCCf5K+K1ytjqpY0RV7GPd4b3LpFd7RFVU86IAC/Wxo+99R/EnIDGW7k7iS/wBVY7Q5YMcsdgyZlsoLZTf4+NaaR0szvbpXO25TniPO3TFx5dJclwnp+y+nvTaGrpaSaszdk8MTp4Xxdzo0o29yJ3qutp+5m1NfcE+VeliufImb3rFKHBbrk9xq8ftdVJWUNvmnc+GmleiI5Y2r+XaIm0TSff2V0ArMTbaAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//Z",
            "ineBack": "/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCABZALIDASIAAhEBAxEB/8QAHAABAAMAAgMAAAAAAAAAAAAAAAUGCAIEAwcJ/8QALhAAAQMEAQQBAgQHAAAAAAAAAAECAwQFBhEHCBIhMRMUQRUyQnEWFyIzUWaz/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAIBBQP/xAAaEQEBAQEBAQEAAAAAAAAAAAAAARECEiEx/9oADAMBAAIRAxEAPwD5hAA6DmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaUAAAAAAAAAAAAAAAAAAAAAAAAAAAARNqS2JYzcMzyi04laZIGVl5rYaCndO5WxtkkejWq5URVRNr50i/sRJf+n/S84YCn+xW//uwy3Gz9X2u6UrTba2e3V/VDwzBU0sj4Zo3XK5bY9qqjmqv0WvCop4LZ0pXG63Sqfb+VsKuWLWem+qvmU0EtU63WxP0xOfNDEsk7v0xRo5V350dmxcFpnmb5pyFnt6/hXjexXys/FL5IxFfO/wCZypS0bF/vVD/SInhvt2kQ9kcL8nY7zPz9hvFNBhtttnFFmbWpbsYrKjsp53JTSKtTXT6/qneqdzpV/J7brSEXp6ZKyJWW+SBZZ6dJZ6BtQ+CKr+FzI5VTynv0qt0vb7RFOobJ6sv5lQcE2qy5/wAdWrCqK0ZpVQ4/bLRRxx0CULqOJyPgnZv6lHL5WVXOVVXyqejG320VxdT1zlAAVUAAAAAAAAAAAAAAAAAAAAAAT+A1OI0WYWusz2G6TWCCf5K+K1ytjqpY0RV7GPd4b3LpFd7RFVU86IAC/Wxo+99R/EnIDGW7k7iS/wBVY7Q5YMcsdgyZlsoLZTf4+NaaR0szvbpXO25TniPO3TFx5dJclwnp+y+nvTaGrpaSaszdk8MTp4Xxdzo0o29yJ3qutp+5m1NfcE+VeliufImb3rFKHBbrk9xq8ftdVJWUNvmnc+GmleiI5Y2r+XaIm0TSff2V0ArMTbaAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//Z",
            "selfie": "/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCABZALIDASIAAhEBAxEB/8QAHAABAAMAAgMAAAAAAAAAAAAAAAUGCAIEAwcJ/8QALhAAAQMEAQQBAgQHAAAAAAAAAAECAwQFBhEHCBIhMRMUQRUyQnEWFyIzUWaz/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAIBBQP/xAAaEQEBAQEBAQEAAAAAAAAAAAAAARECEiEx/9oADAMBAAIRAxEAPwD5hAA6DmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaUAAAAAAAAAAAAAAAAAAAAAAAAAAAARNqS2JYzcMzyi04laZIGVl5rYaCndO5WxtkkejWq5URVRNr50i/sRJf+n/S84YCn+xW//uwy3Gz9X2u6UrTba2e3V/VDwzBU0sj4Zo3XK5bY9qqjmqv0WvCop4LZ0pXG63Sqfb+VsKuWLWem+qvmU0EtU63WxP0xOfNDEsk7v0xRo5V350dmxcFpnmb5pyFnt6/hXjexXys/FL5IxFfO/wCZypS0bF/vVD/SInhvt2kQ9kcL8nY7zPz9hvFNBhtttnFFmbWpbsYrKjsp53JTSKtTXT6/qneqdzpV/J7brSEXp6ZKyJWW+SBZZ6dJZ6BtQ+CKr+FzI5VTynv0qt0vb7RFOobJ6sv5lQcE2qy5/wAdWrCqK0ZpVQ4/bLRRxx0CULqOJyPgnZv6lHL5WVXOVVXyqejG320VxdT1zlAAVUAAAAAAAAAAAAAAAAAAAAAAT+A1OI0WYWusz2G6TWCCf5K+K1ytjqpY0RV7GPd4b3LpFd7RFVU86IAC/Wxo+99R/EnIDGW7k7iS/wBVY7Q5YMcsdgyZlsoLZTf4+NaaR0szvbpXO25TniPO3TFx5dJclwnp+y+nvTaGrpaSaszdk8MTp4Xxdzo0o29yJ3qutp+5m1NfcE+VeliufImb3rFKHBbrk9xq8ftdVJWUNvmnc+GmleiI5Y2r+XaIm0TSff2V0ArMTbaAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//Z"
        }

    ).then(function(body) {
        response.send("Response ok");
    })
    .catch(function(error) {
        console.log("ERROR: " + error);
    });

});

app.listen(process.env.PORT || 5000, () => {
    console.log(`App listening on port ${port}`);
});